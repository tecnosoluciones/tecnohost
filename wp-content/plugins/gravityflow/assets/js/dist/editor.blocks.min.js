!function(){"use strict";var e,t={7817:function(e,t,n){var r=React.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M1151 960h316q-1-3-2.5-8.5t-2.5-7.5l-212-496h-708l-212 496q-1 3-2.5 8.5t-2.5 7.5h316l95 192h320zm513 30v482q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-482q0-62 25-123l238-552q10-25 36.5-42t52.5-17h832q26 0 52.5 17t36.5 42l238 552q25 61 25 123z"})),a=n(9137),o=n(5952),l=n(2611),i=n(5418),c=n(6140),s=n(7063),u=n(2716);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var m=window.wp,y=m.components.BaseControl,v=m.compose.withState,g=function(e){(0,l.Z)(n,e);var t=p(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.isMulti,n=e.setState,r=e.options,a=e.value,o=e.label,l=e.id,i=e.help,c=e.className,s=e.onChange;return React.createElement(y,{label:o,id:l,help:i,className:c},React.createElement(u.ZP,{isMulti:t,value:a,onChange:function(e){n({value:e}),s(e)},menuPlacement:"auto",options:r,styles:{menuPortal:function(e){return d(d({},e),{},{zIndex:9999})}},menuPortalTarget:document.body}))}}]),n}(m.element.Component),h=v()(g),w=n(8272),b=n.n(w);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=window.wp.data.registerStore,_=window.wp.apiFetch,C={setForms:function(e){return{type:"SET_FORMS",forms:e}},receiveForms:function(e){return{type:"RECEIVE_FORMS",path:e}}},S=(E("gravityflow/workflow",{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{forms:[]},t=arguments.length>1?arguments[1]:void 0;return"SET_FORMS"===t.type?k(k({},e),{},{forms:t.forms}):e},actions:C,selectors:{receiveForms:function(e){return e.forms}},controls:{RECEIVE_FORMS:function(e){return _({path:e.path})}},resolvers:{receiveForms:function(){return b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.receiveForms("/gf/v2/workflow/forms/");case 3:t=e.sent,e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),t="error";case 11:return e.abrupt("return",C.setForms(t));case 12:case"end":return e.stop()}}),e,null,[[0,6]])}))()}}}),n(7363));function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var O=window.wp,Z=O.i18n.__,x=O.components,D=x.Spinner,N=x.SelectControl,P=O.data.withSelect,j=function(e){(0,l.Z)(n,e);var t=F(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.selectedForms,n=e.className,r=e.forms,a=e.selectedFields,o=e.onFieldsChange,l=e.onFormsChange,i=e.isMulti;if(void 0===r)return React.createElement("p",{className:n},React.createElement(D,null),Z("Loading","gravityflow"));if("error"===r)return React.createElement("p",null,Z("Some settings are hidden because you don't have sufficient permissions.","gravityflow"));if(!r)return React.createElement("p",null,Z("No forms","gravityflow"));var c=[];i||c.push({label:Z("Select A Workflow Form","gravityflowblocks"),value:""}),Object.keys(r).forEach((function(e){c.push({label:r[e].title,value:r[e].id})}));var s=[],u=1===t.length&&r[t.map((function(e){return e.value}))];return u&&Object.keys(u.fields).forEach((function(e){var t=u.fields[e];if(t.inputs){var n=t.inputs.map((function(e){return{label:e.label,value:e.id}}));s.push({label:t.label,options:n})}else s.push({label:t.label,value:t.id.toString()})})),React.createElement(S.Fragment,null,(void 0===i||i)&&React.createElement(h,{isMulti:!0,label:Z("Filter Forms","gravityflow"),value:t,onChange:l,options:c}),!1===i&&React.createElement(N,{label:Z("Filter Forms","gravityflow"),value:t?t.value:"",onChange:function(e){for(var t=0;t<c.length;t++)if(""===e||c[t].value===parseInt(e)){var n={label:c[t].label,value:c[t].value};l(n);break}},options:c}),u&&void 0!==a&&React.createElement(h,{isMulti:!0,label:Z("Select Fields","gravityflow"),value:a,onChange:o,options:s}))}}]),n}(O.element.Component),I=P((function(e){return{forms:e("gravityflow/workflow").receiveForms()}}))(j),B=n(7707);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var L=window.wp,q=L.i18n.__,A=L.editor.InspectorControls,T=L.components,z=T.PanelBody,M=T.ToggleControl,U=T.TextControl,V=function(e){(0,l.Z)(n,e);var t=J(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.setAttributes,n=e.timeline,r=e.stepStatus,a=e.workflowInfo,o=e.sidebar,l=e.backLink,i=e.backLinkText,c=e.backLinkUrl,s=React.createElement("div",{className:"field-value"}),u=a&&React.createElement("div",{key:"gravityflow-workflow-details",id:"gravityflow-workflow-details"},React.createElement("strong",null,q("Workflow","gravityflow")),React.createElement("div",{id:"entry-id"},q("Entry ID:","gravityflow")," ",s),React.createElement("div",{id:"submitted"},q("Submitted:","gravityflow"),s),React.createElement("div",{id:"created-by"},q("Submitted by:","gravityflow"),s),React.createElement("div",{id:"status"},q("Status:","gravityflow"),s),React.createElement("hr",{style:{marginTop:"10px"}})),f=r&&React.createElement("div",{key:"gravityflow-step-status",id:"gravityflow-step-status"},React.createElement("div",{key:"step-status",id:"step-status"},React.createElement("strong",null,q("Step Name (Status)","gravityflow"))),React.createElement("div",{key:"assignee-status",id:"assignee-status"},q("Assignee:","gravityflow"),s," ",q("(status)","gravityflow"))),d=function(e){return React.createElement("div",{key:"timeline-item-"+e,className:"timeline-item"},React.createElement("div",{className:"timeline-icon"}),React.createElement("div",{className:"timeline-details"},React.createElement("div",{className:"timeline-meta"},React.createElement("div",{className:"timeline-user"}),React.createElement("div",{className:"timeline-date"})),React.createElement("div",{className:"timeline-note"}),React.createElement("div",{className:"timeline-note-half"})))},p=n&&React.createElement("div",{key:"timeline"},React.createElement("strong",null,q("Timeline","gravityflow")),React.createElement("div",{id:"timeline"},d(1),d(2))),m=React.createElement("div",{key:"workflow-box"},u,f);return[React.createElement(A,{key:"detail-inspector"},React.createElement(z,{title:q("Display Settings","gravityflow")},React.createElement(M,{label:q("Timeline","gravityflow"),checked:n,onChange:function(){return t({timeline:!n})}}),React.createElement(M,{label:q("Step Status","gravityflow"),checked:r,onChange:function(){return t({stepStatus:!r})}}),React.createElement(M,{label:q("Workflow Details","gravityflow"),checked:a,onChange:function(){return t({workflowInfo:!a})}}),React.createElement(M,{label:q("Sidebar","gravityflow"),checked:o,onChange:function(){return t({sidebar:!o})}}),React.createElement(M,{label:q("Back Link","gravityflow"),checked:l,onChange:function(){return t({backLink:!l})}}),l&&React.createElement("div",null,React.createElement(U,{label:q("Back Link Text","gravityforms"),value:i,onChange:function(e){return t({backLinkText:e})}}),React.createElement(U,{label:q("Custom Inbox URL (Optional)","gravityforms"),value:c,onChange:function(e){return t({backLinkUrl:e})}})))),React.createElement("div",{key:"detail-view",id:"detail-view",className:"detail-view"},l&&i,React.createElement("div",{id:"container"},React.createElement("div",{key:"main",id:"main"},React.createElement("div",{id:"entry-details"},(0,B.Z)(Array(5)).map((function(e,t){return function(e){return React.createElement("div",{key:"field-value-"+e},React.createElement("div",{className:"field-label-container"},React.createElement("div",{className:"field-label"})),s)}(t)}))),!o&&m,o&&p),o&&React.createElement("div",{key:"sidebar",id:"sidebar"},m)),!o&&p)]}}]),n}(L.element.Component),W=V,G=n(6796);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var Q=window.wp,K=Q.i18n.__,X=function(e){(0,l.Z)(n,e);var t=H(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props.forms_count;return React.createElement("div",{className:"gravityflow-filters"},React.createElement("div",{className:"gravityflow-id-input"},K("ID","gravityflow")),K("Start:","gravityflow"),React.createElement("div",{className:"gravityflow-date-input"},K("yyyy-mm-dd","gravityflow")),K("End:","gravityflow"),React.createElement("div",{className:"gravityflow-date-input"},K("yyyy-mm-dd","gravityflow")),1!==e&&React.createElement("div",{className:"gravityflow-filter-select"},K("Select a Workflow Form","gravityflow")),1===e&&React.createElement("div",{className:"gravityflow-filter-select"},K("Select a field","gravityflow")),React.createElement("div",{className:"gravityflow-filter-button"},K("Apply","gravityflow")))}}]),n}(Q.element.Component),Y=X;function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var ee=window.wp,te=ee.i18n.__,ne=ee.components.Spinner,re=function(e){(0,l.Z)(n,e);var t=$(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.stepHighlight,n=e.idColumn,r=e.submitterColumn,a=e.stepColumn,o=e.actionsColumn,l=e.lastUpdated,i=e.dueDate,c=e.className,s=e.selectedForms,u=e.selectedFields,f=e.entryData,d=e.liveData,p=e.columnOrder,m=e.displayFilters,y=void 0===m;if(void 0===f||void 0===f.rows)return React.createElement("p",{className:c},React.createElement(ne,null),te("Loading","gravityflow"));var v={id:{enabled:n,title:te("ID","gravityflow")},actions:{enabled:o,title:""},form_title:{enabled:0===s.length||s.length>1,title:te("Form","gravityflow")},created_by:{enabled:r,title:te("Submitter","gravityflow")},workflow_step:{enabled:a,title:te("Step","gravityflow")},workflow_final_status:{enabled:!0,title:te("Status","gravityflow")},date_created:{enabled:!0,title:te("Submitted","gravityflow")},fields:u,last_updated:{enabled:l,title:te("Last Updated","gravityflow")},due_date:{enabled:i,title:te("Due date","gravityflow")}},g=[];p.forEach((function(e){g[e]=v[e]}));var h=[];if(Object.keys(g).forEach((function(e){"fields"===e?u.forEach((function(e){h.push({key:e.value,title:e.label})})):g[e].enabled&&h.push({key:e,title:g[e].title})})),!d){var w={};h.forEach((function(e){w[e.key]=React.createElement("div",{style:{width:"auto",backgroundColor:y?"#f4f5fb":"#eee",height:"10px"}}," ")})),f.rows=(0,B.Z)(Array(10)).map((function(e,t){var n={};return(0,G.Z)(n,w),n.id=t+1,0===t&&(n.step_highlight="red"),n}))}var b=y?"gravityflow-entry-table--inbox":"gravityflow-entry-table--status";return React.createElement("div",{className:b},m&&React.createElement(Y,{formsCount:s.length}),React.createElement("table",{className:"gravityflow-entry-table"},React.createElement("thead",null,y&&React.createElement("tr",{colSpan:h.length},React.createElement("th",{colSpan:h.length,className:"gravityflow-entry-table__header"},React.createElement("div",{className:"gravityflow-entry-table__header-div"},React.createElement("i",{className:"gravityflow-entry-table__header-search-icon gflow-icon gflow-icon--search"}),React.createElement("div",{className:"gform-input gravityflow-entry-table__header-search-input"}),React.createElement("i",{className:"gravityflow-entry-table__header-gear-icon gflow-icon gflow-icon--settings"})))),React.createElement("tr",{className:"gravityflow-entry-table__header-columns"},h.map((function(e){var t=e.key;return React.createElement("th",{key:t},e.title)})))),React.createElement("tbody",null,f.rows.map((function(e){var n=t?e.step_highlight:"";return React.createElement("tr",{key:e.id,style:{borderColor:n}},h.map((function(t){var n=t.key,r="actions"===n?React.createElement("div",{className:"gflow-grid__actions"},React.createElement("i",{className:"gflow-grid__actions-trigger gflow-icon gflow-icon--more-vertical",style:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",transform:"rotate(90deg)"}})):e[n];return React.createElement("td",{key:n},r)})))})))))}}]),n}(ee.element.Component),ae=re;function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var le=window.wp,ie=le.apiFetch,ce=le.url.addQueryArgs,se=le.i18n.__,ue=le.compose.withState,fe=le.editor.InspectorControls,de=le.components,pe=de.PanelBody,me=de.PanelRow,ye=de.ToggleControl,ve=de.Button,ge=de.ButtonGroup,he=function(e){(0,l.Z)(n,e);var t=oe(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentWillUnmount",value:function(){le.data.dispatch("core/editor").editPost({meta:{_gravityflow_inbox_forms_json:"",_gravityflow_inbox_fields_json:""}})}},{key:"componentDidMount",value:function(){this.getInboxEntries(this.props.selectedForms,this.props.selectedFields)}},{key:"componentDidUpdate",value:function(e){e.selectedForms===this.props.selectedForms&&e.selectedFields===this.props.selectedFields||this.getInboxEntries(this.props.selectedForms.map((function(e){return e.value})),this.props.selectedFields.map((function(e){return e.value})))}},{key:"getInboxEntries",value:function(e,t){var n=this;ie({path:ce("/gf/v2/inbox-entries/",{"form-ids":e,fields:t,"last-updated":!0,"due-date":!0,"actions-column":!0})}).then((function(e){n.props.setState({entryData:e,loaded:!0})})).catch((function(){n.props.setState({entryData:[],loaded:!0})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=n.stepHighlight,a=n.idColumn,o=n.submitterColumn,l=n.stepColumn,i=n.actionsColumn,c=n.lastUpdated,s=n.dueDate,u=n.selectedFormsJson,f=n.selectedFieldsJson,d=n.timeline,p=n.stepStatus,m=n.workflowInfo,y=n.sidebar,v=n.backLink,g=n.backLinkText,h=n.backLinkUrl,w=t.setAttributes,b=t.setState,R=t.currentView,k=t.liveData,E=t.entryData,_=f?JSON.parse(f):[],C=u?JSON.parse(u):[],S="detail"===R;return[React.createElement(fe,{key:"inbox-inspector"},React.createElement(pe,{title:se("View","gravityflow")},React.createElement(ge,null,React.createElement(ve,{className:"view-toggle-button",isDefault:S,onClick:function(){return b({currentView:"list"})},style:{zIndex:0},isPrimary:!S},se("List","gravityflow")),React.createElement(ve,{className:"view-toggle-button",isDefault:!S,onClick:function(){return b({currentView:"detail"})},style:{zIndex:0},isPrimary:S},"Detail")),!S&&React.createElement(me,null,React.createElement(ye,{label:se("Preview Live Data","gravityflow"),checked:k,onChange:function(){e.getInboxEntries(C.map((function(e){return e.value})),_.map((function(e){return e.value}))),b({liveData:!k})}}))),!S&&React.createElement("div",null,React.createElement(pe,{title:se("Display Settings","gravityflow")},React.createElement(ye,{label:se("Highlight","gravityflow"),checked:r,onChange:function(){return w({stepHighlight:!r})}}),React.createElement(ye,{label:se("Entry ID","gravityflow"),checked:a,onChange:function(){return w({idColumn:!a})}}),React.createElement(ye,{label:se("Approval Actions","gravityflow"),checked:i,onChange:function(){return w({actionsColumn:!i})}}),React.createElement(ye,{label:se("Submitter","gravityflow"),checked:o,onChange:function(){return w({submitterColumn:!o})}}),React.createElement(ye,{label:se("Step","gravityflow"),checked:l,onChange:function(){return w({stepColumn:!l})}}),React.createElement(ye,{label:se("Last updated","gravityflow"),checked:c,onChange:function(){return w({lastUpdated:!c})}}),React.createElement(ye,{label:se("Due Date","gravityflow"),checked:s,onChange:function(){return w({dueDate:!s})}}),React.createElement(I,{isMulti:!0,selectedForms:C,selectedFields:_,onFormsChange:function(t){w({selectedFormsJson:JSON.stringify(t),selectedFieldsJson:""});var n=t.map((function(e){return e.value}));e.getInboxEntries(n,[])},onFieldsChange:function(t){w({selectedFieldsJson:JSON.stringify(t)});var n=t.map((function(e){return e.value}));e.getInboxEntries(t.map((function(e){return e.value})),n)}})))),!S&&React.createElement(ae,{key:"gravityflow-inbox",stepHighlight:r,idColumn:a,submitterColumn:o,stepColumn:l,actionsColumn:i,lastUpdated:c,dueDate:s,selectedForms:C,selectedFields:_,liveData:k,entryData:E,columnOrder:["id","actions","form_title","created_by","workflow_step","date_created","fields","last_updated","due_date"]}),S&&React.createElement(W,{key:"gravityflow-detail",timeline:d,stepStatus:p,workflowInfo:m,sidebar:y,backLink:v,backLinkText:g,backLinkUrl:h,setAttributes:w})]}}]),n}(le.element.Component),we=ue({entryData:{rows:[],columns:[]},liveData:!1,currentView:"list"})(he),be=window.wp,Re=be.i18n.__;(0,be.blocks.registerBlockType)("gravityflow/inbox",{title:Re("Workflow Inbox","gravityflow"),description:Re("Displays the workflow inbox.","gravityflow"),icon:{src:r},keywords:[Re("Gravity Flow"),Re("Gravity")],category:"widgets",supports:{multiple:!1,html:!1,anchor:!0},attributes:{stepHighlight:{type:"boolean",default:!0},idColumn:{type:"boolean",default:!0},submitterColumn:{type:"boolean",default:!0},stepColumn:{type:"boolean",default:!0},actionsColumn:{type:"boolean",default:!1},lastUpdated:{type:"boolean",default:!1},dueDate:{type:"boolean",default:!1},selectedFormsJson:{type:"string",source:"meta",meta:"_gravityflow_inbox_forms_json",default:""},selectedFieldsJson:{type:"string",source:"meta",meta:"_gravityflow_inbox_fields_json",default:""},timeline:{type:"boolean",default:!0},stepStatus:{type:"boolean",default:!0},workflowInfo:{type:"boolean",default:!0},sidebar:{type:"boolean",default:!0},backLink:{type:"boolean",default:!1},backLinkText:{type:"string",default:Re("Return to list","gravityflow")},backLinkUrl:{type:"string",default:""}},edit:we,save:function(){return null}});var ke=React.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M384 1152q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm192-448q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm428 481l101-382q6-26-7.5-48.5t-38.5-29.5-48 6.5-30 39.5l-101 382q-60 5-107 43.5t-63 98.5q-20 77 20 146t117 89 146-20 89-117q16-60-6-117t-72-91zm660-33q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm-640-640q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm448 192q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm320 448q0 261-141 483-19 29-54 29h-1402q-35 0-54-29-141-221-141-483 0-182 71-348t191-286 286-191 348-71 348 71 286 191 191 286 71 348z"}));function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var _e=window.wp,Ce=_e.i18n.__,Se=_e.editor.InspectorControls,Fe=_e.components,Oe=Fe.PanelBody,Ze=Fe.ToggleControl,xe=Fe.Button,De=Fe.ButtonGroup,Ne=_e.compose.withState,Pe=function(e){(0,l.Z)(n,e);var t=Ee(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentWillUnmount",value:function(){_e.data.dispatch("core/editor").editPost({meta:{_gravityflow_status_fields_json:"",_gravityflow_status_forms_json:""}})}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=t.idColumn,r=t.submitterColumn,a=t.stepColumn,o=t.lastUpdated,l=t.dueDate,i=t.selectedFormsJson,c=t.selectedFieldsJson,s=t.timeline,u=t.stepStatus,f=t.workflowInfo,d=t.sidebar,p=t.backLink,m=t.backLinkText,y=t.backLinkUrl,v=t.displayAll,g=t.allowAnonymous,h=e.setAttributes,w=e.setState,b=e.currentView,R=e.liveData,k=c?JSON.parse(c):[],E=i?JSON.parse(i):[],_="detail"===b;return[React.createElement(Se,{key:"inbox-inspector"},React.createElement(Oe,{title:Ce("View","gravityflow")},React.createElement(De,null,React.createElement(xe,{className:"view-toggle-button",isDefault:!0,onClick:function(){return w({currentView:"list"})},style:{zIndex:0},isPrimary:!_},Ce("List","gravityflow")),React.createElement(xe,{className:"view-toggle-button",isDefault:!0,onClick:function(){return w({currentView:"detail"})},style:{zIndex:0},isPrimary:_},"Detail"))),!_&&React.createElement("div",null,React.createElement(Oe,{title:Ce("Display Settings","gravityflow")},React.createElement(Ze,{label:Ce("Entry ID","gravityflow"),checked:n,onChange:function(){return h({idColumn:!n})}}),React.createElement(Ze,{label:Ce("Submitter","gravityflow"),checked:r,onChange:function(){return h({submitterColumn:!r})}}),React.createElement(Ze,{label:Ce("Step","gravityflow"),checked:a,onChange:function(){return h({stepColumn:!a})}}),React.createElement(Ze,{label:Ce("Last updated","gravityflow"),checked:o,onChange:function(){return h({lastUpdated:!o})}}),React.createElement(Ze,{label:Ce("Due Date","gravityflow"),checked:l,onChange:function(){return h({dueDate:!l})}})),React.createElement(I,{isMulti:!0,selectedForms:E,selectedFields:k,onFormsChange:function(e){h({selectedFormsJson:JSON.stringify(e),selectedFieldsJson:""})},onFieldsChange:function(e){h({selectedFieldsJson:JSON.stringify(e)})}}),React.createElement(Oe,{title:Ce("Danger Zone","gravityflow"),initialOpen:!1},React.createElement(Ze,{label:Ce("Display All Entries","gravityflow"),checked:v,onChange:function(){return h({displayAll:!v})},help:Ce("Displays all entries to all logged in users regardless of their permissions.","gravityflow")}),v&&React.createElement(Ze,{label:Ce("Make all entries public","gravityflow"),checked:g,onChange:function(){return h({allowAnonymous:!g})},help:Ce("Displays all entries to all site visitors, including anonymous. This will also allow search engines to index the entries.","gravityflow")})))),!_&&React.createElement(ae,{key:"gravityflow-status",idColumn:n,submitterColumn:r,stepColumn:a,lastUpdated:o,dueDate:l,selectedForms:E,selectedFields:k,liveData:R,entryData:{rows:[]},columnOrder:["id","date_created","form_title","created_by","workflow_step","workflow_final_status","fields","last_updated","due_date"],displayFilters:!0}),_&&React.createElement(W,{key:"gravityflow-detail",timeline:s,stepStatus:u,workflowInfo:f,sidebar:d,backLink:p,backLinkText:m,backLinkUrl:y,setAttributes:h})]}}]),n}(_e.element.Component),je=Ne({currentView:"list"})(Pe),Ie=window.wp,Be=Ie.i18n.__;(0,Ie.blocks.registerBlockType)("gravityflow/status",{title:Be("Workflow Status","gravityflow"),description:Be("Display the workflow status list.","gravityflow"),icon:{src:ke},keywords:[Be("Gravity Flow"),Be("Gravity")],category:"widgets",supports:{multiple:!1,html:!1,anchor:!0},attributes:{idColumn:{type:"boolean",default:!0},submitterColumn:{type:"boolean",default:!0},stepColumn:{type:"boolean",default:!0},lastUpdated:{type:"boolean",default:!1},dueDate:{type:"boolean",default:!1},selectedFormsJson:{type:"string",source:"meta",meta:"_gravityflow_status_forms_json",default:""},selectedFieldsJson:{type:"string",source:"meta",meta:"_gravityflow_status_fields_json",default:""},timeline:{type:"boolean",default:!0},stepStatus:{type:"boolean",default:!0},workflowInfo:{type:"boolean",default:!0},sidebar:{type:"boolean",default:!0},backLink:{type:"boolean",default:!1},backLinkText:{type:"string",default:Be("Return to list","gravityflow")},backLinkUrl:{type:"string",default:""},displayAll:{type:"boolean",source:"meta",meta:"_gravityflow_status_display_all",default:!1},allowAnonymous:{type:"boolean",source:"meta",meta:"_gravityflow_status_allow_anonymous",default:!1}},edit:je,save:function(){return null}});var Je=React.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M888 1184l116-116-152-152-116 116v56h96v96h56zm440-720q-16-16-33 1l-350 350q-17 17-1 33t33-1l350-350q17-17 1-33zm80 594v190q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-14 14-32 8-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-126q0-13 9-22l64-64q15-15 35-7t20 29zm-96-738l288 288-672 672h-288v-288zm444 132l-92 92-288-288 92-92q28-28 68-28t68 28l152 152q28 28 28 68t-28 68z"}));function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var qe=window.wp,Ae=qe.editor.InspectorControls,Te=qe.data.withSelect,ze=function(e){(0,l.Z)(n,e);var t=Le(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentWillUnmount",value:function(){qe.data.dispatch("core/editor").editPost({meta:{_gravityflow_submit_forms_json:""}})}},{key:"render",value:function(){var e=this.props,t=e.attributes.selectedFormsJson,n=e.forms,r=e.setAttributes,a=t?JSON.parse(t):[],o=[];0===a.length?Object.keys(n).forEach((function(e){n[e].isPublished&&o.push({label:n[e].title,value:n[e].id})})):o=a;var l=o.map((function(e){return React.createElement("div",{key:e.value},e.label)}));return[React.createElement(Ae,{key:"inbox-inspector"},React.createElement(I,{isMulti:!0,selectedForms:a,onFormsChange:function(e){r({selectedFormsJson:JSON.stringify(e)})}})),React.createElement("div",{key:"form-list"},l)]}}]),n}(qe.element.Component),Me=Te((function(e){return{forms:e("gravityflow/workflow").receiveForms()}}))(ze),Ue=window.wp,Ve=Ue.i18n.__;(0,Ue.blocks.registerBlockType)("gravityflow/submit",{title:Ve("Workflow Submit","gravityflow"),description:Ve("Display links to workflow forms.","gravityflow"),icon:{src:Je},keywords:[Ve("Gravity Flow"),Ve("Gravity")],category:"widgets",supports:{multiple:!1,html:!1,anchor:!0},attributes:{selectedFormsJson:{type:"string",source:"meta",meta:"_gravityflow_submit_forms_json",default:""}},edit:Me,save:function(){return null}});var We=React.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M640 768v512H384V768h256zm384-512v1024H768V256h256zm1024 1152v128H0V0h128v1408h1920zm-640-896v768h-256V512h256zm384-384v1152h-256V128h256z"}));function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var He=window.wp,Qe=He.i18n.__,Ke=He.components.SelectControl,Xe=function(e){(0,l.Z)(n,e);var t=Ge(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.range,r=e.onRangeChange,a=e.selectedFormJson,o=e.onFormsChange,l=e.category,i=e.onCategoryChange,c=e.assignee,s=e.assignees,u=e.onAssigneeChange,f=e.step_id,d=e.steps,p=e.onStepChange,m=a?JSON.parse(a):[];return[React.createElement(S.Fragment,{key:t},React.createElement(Ke,{label:Qe("Range","gravityflowblocks"),value:n,onChange:function(e){r(e)},options:[{value:"last-12-months",label:Qe("Last 12 months","gravityflowblocks")},{value:"last-6-months",label:Qe("Last 6 months","gravityflowblocks")},{value:"last-3-months",label:Qe("Last 3 months","gravityflowblocks")}]}),React.createElement(I,{isMulti:!1,selectedForms:m,onFormsChange:function(e){o(e)}}),""!==m.value&&React.createElement(Ke,{label:Qe("Category","gravityflowblocks"),value:l,onChange:function(e){i(e)},options:[{value:"month",label:Qe("Month","gravityflowblocks")},{value:"assignee",label:Qe("Assignee","gravityflowblocks")},{value:"step",label:Qe("Step","gravityflowblocks")}]}),"step"===l&&React.createElement(Ke,{label:Qe("Step","gravityflowblocks"),value:f,onChange:function(e){p(e)},options:d}),s&&React.createElement(Ke,{label:Qe("Assignee","gravityflowblocks"),value:c,onChange:function(e){u(e)},options:s}))]}}]),n}(He.element.Component),Ye=Xe;function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var et=window.wp.components.Button,tt=window.wp.i18n.__,nt=function(e){(0,l.Z)(n,e);var t=$e(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return React.createElement(S.Fragment,null,React.createElement("select",{disabled:!0,key:"range"},React.createElement("option",null,tt("Last 12 month","gravityflowblocks"))),React.createElement("select",{disabled:!0,key:"form"},React.createElement("option",null,tt("Select A Workflow Form","gravityflowblocks"))),React.createElement(et,{disabled:!0,key:"filter",isSecondary:!0},"Filter"))}}]),n}(window.wp.element.Component),rt=nt;function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var ot=window.wp,lt=ot.i18n.__,it=ot.editor.InspectorControls,ct=ot.apiFetch,st=ot.url.addQueryArgs,ut=ot.compose.withState,ft=ot.components,dt=ft.PanelBody,pt=ft.ToggleControl,mt=ft.Spinner,yt=function(e){(0,l.Z)(n,e);var t=at(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.getSteps(),this.getReports()}},{key:"componentDidUpdate",value:function(e){e.attributes.range===this.props.attributes.range&&e.attributes.selectedFormJson===this.props.attributes.selectedFormJson&&e.attributes.category===this.props.attributes.category&&e.attributes.stepId===this.props.attributes.stepId&&e.attributes.assignee===this.props.attributes.assignee||this.getReports(this.props)}},{key:"getSelectedForm",value:function(){var e=this.props.attributes.selectedFormJson;return e?JSON.parse(e).value:""}},{key:"getSteps",value:function(e){var t=this;void 0===e&&(e=this.getSelectedForm());var n=[{label:lt("All Steps","gravityflow"),value:""}],r=[];""!==e&&ct({path:"gf/v2/workflow/forms/"+e+"/steps"}).then((function(e){Object.keys(e).forEach((function(t){n.push({label:e[t].name,value:e[t].id}),r[e[t].id]=[{label:lt("All Assignees","gravityflow"),value:""}],e[t].assignees.length&&e[t].assignees.forEach((function(n){r[e[t].id].push({label:n.name,value:n.key})}))})),t.props.setState({steps:n,assignees:r})}))}},{key:"getReports",value:function(e){var t=this,n=this.getSelectedForm();void 0===e&&(e=this.props),this.props.setState({reports:{}}),ct({path:st("/gf/v2/workflow/reports/",{form:n,range:""===e.attributes.range?"last-12-months":e.attributes.range,category:e.attributes.category,"step-id":e.attributes.stepId,assignee:e.attributes.assignee})}).then((function(e){if(t.props.setState({reports:e}),e.hasOwnProperty("table")){var n=window.google.visualization.arrayToDataTable(JSON.parse(e.table)),r=JSON.parse(e.options);new window.google.charts.Bar(document.querySelector('[data-block="'+t.props.clientId+'"] .gravityflow_chart')).draw(n,r)}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=n.range,a=n.selectedFormJson,o=n.category,l=n.stepId,i=n.assignee,c=n.displayFilter,s=t.steps,u=t.assignees,f=t.reports,d=t.setAttributes,p=function(t){return React.createElement(Ye,{name:t.name,range:r,onRangeChange:function(e){d({range:e})},selectedFormJson:a,onFormsChange:function(e){d({selectedFormJson:JSON.stringify(e),category:"",stepId:""})},category:o,onCategoryChange:function(t){d({category:t,stepId:"",assignee:""}),"step"===t&&e.getSteps(e.getSelectedForm())},stepId:l,onStepChange:function(e){d({stepId:e,assignee:""})},steps:s,assignee:i,onAssigneeChange:function(e){d({assignee:e})},assignees:u[l]})};return[React.createElement(it,{key:"inbox-inspector"},React.createElement(dt,{title:lt("Display Settings","gravityflowblocks")},React.createElement(pt,{label:lt("Display filters","gravityflowblocks"),checked:c,onChange:function(){return d({displayFilter:!c})}})),React.createElement(dt,{title:lt("Filter Settings","gravityflowblocks")},React.createElement(p,{name:"panel-body-filter"}))),c&&React.createElement(rt,{key:"block-content-filter"}),"string"!=typeof f&&!f.hasOwnProperty("table")&&React.createElement("div",{key:"gravityflow_chart_loading",className:"gravityflow_chart"},React.createElement(mt,null),lt("Loading","gravityflow")),f.hasOwnProperty("table")&&React.createElement("div",{key:"gravityflow_chart_top_level",className:"gravityflow_chart"}),"string"==typeof f&&React.createElement("div",{key:"gravityflow_chart_no_data",className:"gravityflow_chart"},lt("No data to display","gravityflowblocks"))]}}]),n}(ot.element.Component),vt=ut({steps:[],assignees:[],reports:{}})(yt),gt=window.wp,ht=gt.i18n.__;(0,gt.blocks.registerBlockType)("gravityflow/reports",{title:ht("Workflow Reports","gravityflow"),description:ht("Displays the workflow reports.","gravityflow"),icon:{src:We},keywords:[ht("Gravity Flow"),ht("Gravity")],category:"widgets",supports:{multiple:!0,html:!1,anchor:!0},attributes:{displayFilter:{type:"boolean",default:!1},range:{type:"string",default:"last-12-months"},selectedFormJson:{type:"string",default:""},category:{type:"string",default:""},stepId:{type:"string",default:""},assignee:{type:"string",default:""}},edit:vt,save:function(){return null}})},7363:function(e){e.exports=React},1533:function(e){e.exports=ReactDOM}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=function(t,n,a,o){if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],o=e[u][2];for(var i=!0,c=0;c<n.length;c++)(!1&o||l>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[c])}))?n.splice(c--,1):(i=!1,o<l&&(l=o));if(i){e.splice(u--,1);var s=a();void 0!==s&&(t=s)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,a,o]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.j=883,function(){var e={883:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,l=n[0],i=n[1],c=n[2],s=0;if(l.some((function(t){return 0!==e[t]}))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(c)var u=c(r)}for(t&&t(n);s<l.length;s++)o=l[s],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},n=self.webpackChunkgravityflow=self.webpackChunkgravityflow||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=r.O(void 0,[194],(function(){return r(7817)}));a=r.O(a)}();