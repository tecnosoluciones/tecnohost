function update_priorities(){jQuery("#cat_tbody tr").each(function(t){jQuery(this).find("td .priority").html(t+1)}),jQuery("#product_tbody tr").each(function(t){jQuery(this).find("td .priority").html(t+1)})}jQuery(document).ready(function(n){function o(t){var e=n(t).closest("tbody");e.length&&e.find("tr").length<=0&&e.append(n("#no_addons_template tbody").html())}o(n("#cat_tbody")),o(n("#product_tbody")),n("#cat_tbody, #product_tbody").sortable({items:"tr:not(.no_addons)",cursor:"move",placeholder:"ui-sortable-placeholder",axis:"y",handle:"td",scrollSensitivity:40,helper:function(t,e){return e.children().each(function(){n(this).width(n(this).width())}),e.css("left","0"),e},start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style"),update_priorities()}});var i=store_categories;n("#add_category").click(function(t){n("#cat_tbody .no_addons").remove();for(var e,o="",r=0;r<i.length;r++){var a=!1;n(".category-select option:selected").each(function(){if(n(this).val()==i[r].id)return!(a=!0)}),a||(o+='<option value="'+i[r].id+'">'+i[r].name+"</option>")}if(""==o)return alert(cart_addons_settings.all_categories_used),!1;for(;e=1+Math.floor(9999999*Math.random()),0<n("#cselect_"+e).length;);var c=n("#category_form_template tbody").html();c=(c=c.replace(/\{number\}/g,e)).replace(/(sfn\-product\-search\-tpl)/g,"sfn-product-search"),n("#cat_tbody").append(c),update_priorities(),n("select#category_"+e).html(o),sfn_ajax_search()}),n("#add_product").click(function(t){n("#product_tbody .no_addons").remove();for(var e;e=1+Math.floor(9999999*Math.random()),0<n("#pselect_"+e).length;);var o=n("#product_form_template tbody").html();o=(o=o.replace(/\{number\}/g,e)).replace(/(sfn\-product\-search\-tpl)/g,"sfn-product-search"),n("#product_tbody").append(o),update_priorities(),sfn_ajax_search()}),n("tbody#product_tbody").on("change",".product-select",function(){var e=n(this).next(".include-variations-label");n.get(ajaxurl,{action:"sfn_product_is_variable",product_id:n(this).val()},function(t){!0===t.is_variable?e.show():(e.hide(),e.find(":input[type=checkbox]").attr("checked",!1))},"json")}),n("body").on("click",".remove",function(t){t.preventDefault();var e=n(this).closest("tbody");n(this).parents("tr").remove(),o(e),update_priorities()})});
